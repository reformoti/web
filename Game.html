<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ö–ª–∏–∫–µ—Ä</title>
<style>
*{box-sizing:border-box; -webkit-tap-highlight-color:transparent;}
body{
  margin:0;
  font-family:'Orbitron', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background:#000 url('https://images.wallpaperscraft.ru/image/single/kosmos_zvezdy_tumannost_157030_3840x2400.jpg') center/cover no-repeat fixed;
  color:#fff;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:10px;
  transition:background-image 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  overflow-x:hidden;
  touch-action:pan-y;
}
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800&display=swap');

/* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 768px) {
  body{
    padding:5px;
    font-size:14px;
  }
}

.game-container{
  width:100%;
  max-width:1200px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:15px;
  position:relative;
  z-index:1;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
.top-bar{
  width:100%;
  display:flex;
  justify-content:space-between;
  padding:12px 5px;
  background:rgba(10,15,30,0.85);
  backdrop-filter:blur(15px);
  border-radius:15px;
  border:1px solid rgba(88, 179, 255, 0.2);
  box-shadow:0 8px 30px rgba(0,0,0,0.5),
             inset 0 0 20px rgba(0,150,255,0.05);
  margin-bottom:15px;
}

@media (max-width: 768px) {
  .top-bar{
    flex-direction:column;
    gap:10px;
    padding:15px;
    border-radius:20px;
  }
}

.astro-btn{
  background:linear-gradient(145deg, rgba(25,35,70,0.9), rgba(15,25,50,0.9));
  border:none;
  color:#8bb9ff;
  padding:12px 20px;
  border-radius:12px;
  cursor:pointer;
  font-weight:600;
  font-size:14px;
  font-family:'Orbitron', sans-serif;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border:1px solid rgba(88, 179, 255, 0.3);
  box-shadow:0 4px 15px rgba(0,0,0,0.4),
             inset 0 0 10px rgba(88, 179, 255, 0.05);
  letter-spacing:0.5px;
  text-transform:uppercase;
  min-height:50px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex:1;
  margin:0 5px;
  touch-action:manipulation;
}

@media (max-width: 768px) {
  .astro-btn{
    width:100%;
    margin:5px 0;
    padding:15px;
    font-size:16px;
    min-height:55px;
  }
}

.astro-btn:hover{
  transform:translateY(-2px) scale(1.03);
  box-shadow:0 8px 25px rgba(0,100,255,0.3),
             inset 0 0 15px rgba(88, 179, 255, 0.1);
  color:#b3d4ff;
  border-color:rgba(88, 179, 255, 0.4);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
.stats-container{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:10px;
  width:100%;
  margin-bottom:15px;
}

@media (max-width: 480px) {
  .stats-container{
    grid-template-columns:1fr;
    gap:8px;
  }
}

.stat-card{
  background:rgba(15,20,40,0.8);
  backdrop-filter:blur(10px);
  padding:15px;
  border-radius:15px;
  border:1px solid rgba(88, 179, 255, 0.15);
  box-shadow:0 6px 20px rgba(0,0,0,0.4);
  text-align:center;
  transition:all 0.3s ease;
  min-height:90px;
  display:flex;
  flex-direction:column;
  justify-content:center;
}

@media (max-width: 768px) {
  .stat-card{
    padding:12px;
    min-height:80px;
  }
}

.stat-card:hover{
  transform:translateY(-3px);
  box-shadow:0 12px 30px rgba(0,100,255,0.3);
  border-color:rgba(88, 179, 255, 0.3);
}

.stat-label{
  font-size:12px;
  color:#8bb9ff;
  margin-bottom:6px;
  text-transform:uppercase;
  letter-spacing:0.5px;
  font-weight:500;
}

@media (max-width: 768px) {
  .stat-label{
    font-size:11px;
  }
}

.stat-value{
  font-size:22px;
  font-weight:800;
  color:#fff;
  font-family:'Orbitron', sans-serif;
  text-shadow:0 0 10px rgba(0,180,255,0.4);
  background:linear-gradient(135deg, #00b4ff, #9d4edd);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  overflow:hidden;
  text-overflow:ellipsis;
}

@media (max-width: 768px) {
  .stat-value{
    font-size:18px;
  }
}

/* –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –±–ª–æ–∫ –∞–¥–∞–ø—Ç–∏–≤ */
.main-game-area{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:15px;
  width:100%;
  padding:20px;
  background:rgba(10,15,30,0.6);
  backdrop-filter:blur(20px);
  border-radius:20px;
  border:1px solid rgba(88, 179, 255, 0.2);
  box-shadow:0 10px 40px rgba(0,0,0,0.6),
             inset 0 0 30px rgba(0,150,255,0.1);
  margin-bottom:15px;
}

@media (max-width: 768px) {
  .main-game-area{
    padding:15px;
    border-radius:25px;
  }
}

.stellar-energy{
  font-size:clamp(18px, 4vw, 28px);
  font-weight:800;
  background:linear-gradient(135deg, #00b4ff, #9d4edd, #ff6b6b);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  text-shadow:0 3px 15px rgba(0,180,255,0.3);
  font-family:'Orbitron', sans-serif;
  letter-spacing:1px;
  text-align:center;
  margin:0;
  padding:0 10px;
  word-break:break-word;
}

.nova-core-area{
  position:relative;
  margin:15px 0;
  width:100%;
  display:flex;
  justify-content:center;
}

.nova-core{
  width:min(70vw, 300px);
  height:min(70vw, 300px);
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #00b4ff, #4a00e0);
  background-size:cover;
  background-position:center;
  cursor:pointer;
  transition:all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  border:4px solid rgba(88, 179, 255, 0.4);
  box-shadow:0 0 60px rgba(0,180,255,0.5),
             inset 0 0 40px rgba(255,255,255,0.15);
  position:relative;
  animation:pulse-glow 4s infinite alternate;
  touch-action:manipulation;
  -webkit-touch-callout:none;
}

@media (max-width: 480px) {
  .nova-core{
    width:min(80vw, 250px);
    height:min(80vw, 250px);
  }
}

@keyframes pulse-glow{
  0%{box-shadow:0 0 50px rgba(0,180,255,0.5), inset 0 0 30px rgba(255,255,255,0.15);}
  100%{box-shadow:0 0 70px rgba(157,78,221,0.6), inset 0 0 50px rgba(255,255,255,0.2);}
}

.nova-core:active{
  transform:scale(0.95);
  box-shadow:0 0 80px rgba(255,107,107,0.8),
             inset 0 0 40px rgba(255,255,255,0.25);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
.game-info{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:10px;
  width:100%;
  margin-top:15px;
}

@media (max-width: 480px) {
  .game-info{
    grid-template-columns:1fr;
    gap:8px;
  }
}

.info-item{
  background:rgba(20,25,50,0.7);
  padding:12px 15px;
  border-radius:12px;
  border:1px solid rgba(88, 179, 255, 0.15);
  text-align:center;
  min-height:70px;
  display:flex;
  flex-direction:column;
  justify-content:center;
}

.info-label{
  font-size:12px;
  color:#a0c8ff;
  margin-bottom:4px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

@media (max-width: 768px) {
  .info-label{
    font-size:11px;
  }
}

.info-value{
  font-size:16px;
  font-weight:700;
  color:#00e0ff;
  font-family:'Orbitron', sans-serif;
  overflow:hidden;
  text-overflow:ellipsis;
}

@media (max-width: 768px) {
  .info-value{
    font-size:14px;
  }
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç–∏ */
.singularity-btn{
  background:linear-gradient(145deg, #9d4edd, #ff6b6b);
  color:white;
  border:none;
  padding:15px 25px;
  border-radius:18px;
  font-size:clamp(14px, 3vw, 18px);
  font-weight:800;
  cursor:pointer;
  margin:20px auto;
  display:block;
  transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  font-family:'Orbitron', sans-serif;
  letter-spacing:1px;
  text-transform:uppercase;
  box-shadow:0 10px 30px rgba(157,78,221,0.5);
  border:2px solid rgba(255,255,255,0.2);
  width:100%;
  max-width:400px;
  min-height:60px;
  touch-action:manipulation;
}

@media (max-width: 768px) {
  .singularity-btn{
    padding:18px;
    margin:15px auto;
    font-size:16px;
    border-radius:20px;
  }
}

.singularity-btn:hover:not(:disabled){
  transform:translateY(-3px) scale(1.02);
  box-shadow:0 15px 40px rgba(157,78,221,0.7),
             0 0 30px rgba(255,107,107,0.5);
}

.singularity-btn:disabled{
  opacity:0.5;
  cursor:not-allowed;
  transform:none !important;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞–Ω–µ–ª–∏ */
.panel{
  position:fixed;
  top:-100%;
  left:0;
  width:100%;
  height:100vh;
  height:100dvh;
  background:rgba(5,10,25,0.98);
  backdrop-filter:blur(20px);
  transition:top 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  padding:70px 15px 20px;
  overflow-y:auto;
  overflow-x:hidden;
  z-index:1000;
  -webkit-overflow-scrolling:touch;
  overscroll-behavior:contain;
}

@media (max-width: 768px) {
  .panel{
    padding:60px 10px 15px;
  }
}

.panel.active{
  top:0;
}

.close-panel{
  position:fixed;
  top:15px;
  right:15px;
  background:rgba(255,107,107,0.2);
  border:none;
  color:#ff6b6b;
  width:45px;
  height:45px;
  border-radius:50%;
  font-size:24px;
  cursor:pointer;
  transition:all 0.3s;
  border:2px solid rgba(255,107,107,0.3);
  z-index:1001;
  display:flex;
  align-items:center;
  justify-content:center;
  touch-action:manipulation;
}

@media (max-width: 768px) {
  .close-panel{
    top:10px;
    right:10px;
    width:40px;
    height:40px;
    font-size:20px;
  }
}

.panel-tabs{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:20px;
  padding-bottom:15px;
  border-bottom:2px solid rgba(88, 179, 255, 0.2);
  justify-content:center;
}

@media (max-width: 768px) {
  .panel-tabs{
    gap:6px;
    margin-bottom:15px;
  }
}

.tab{
  background:rgba(40,50,100,0.8);
  border:none;
  color:#a0c8ff;
  padding:10px 16px;
  border-radius:12px;
  cursor:pointer;
  font-size:13px;
  font-weight:600;
  font-family:'Orbitron', sans-serif;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border:1px solid rgba(88, 179, 255, 0.2);
  box-shadow:0 3px 10px rgba(0,0,0,0.4);
  letter-spacing:0.5px;
  min-width:120px;
  text-align:center;
  touch-action:manipulation;
  flex:1;
  min-height:45px;
}

@media (max-width: 768px) {
  .tab{
    padding:8px 12px;
    font-size:12px;
    min-width:100px;
    min-height:40px;
  }
}

.tab.active{
  background:linear-gradient(145deg, #4a00e0, #8e2de2);
  color:#fff;
  box-shadow:0 5px 20px rgba(74,0,224,0.5);
  border-color:rgba(142,45,226,0.6);
}

.tab-content{
  display:none;
}

.tab-content.active{
  display:block;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∫–∞—á–∫–∏ */
.upgrades-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));
  gap:10px;
  padding:15px;
}

@media (max-width: 480px) {
  .upgrades-grid{
    grid-template-columns:repeat(auto-fill, minmax(140px, 1fr));
    gap:8px;
    padding:10px;
  }
}

.upgrade-btn{
  background:linear-gradient(145deg, rgba(30,40,80,0.9), rgba(20,30,60,0.9));
  border:2px solid rgba(88, 179, 255, 0.25);
  border-radius:15px;
  padding:15px;
  color:#b3d4ff;
  font-family:'Orbitron', sans-serif;
  font-size:12px;
  font-weight:600;
  cursor:pointer;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow:0 5px 20px rgba(0,0,0,0.5);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  min-height:110px;
  touch-action:manipulation;
}

@media (max-width: 768px) {
  .upgrade-btn{
    padding:12px;
    min-height:100px;
  }
}

.upgrade-value{
  font-size:18px;
  font-weight:800;
  color:#00e0ff;
  text-shadow:0 0 10px rgba(0,224,255,0.4);
}

@media (max-width: 768px) {
  .upgrade-value{
    font-size:16px;
  }
}

.upgrade-price{
  font-size:11px;
  color:#ffd166;
  background:rgba(0,0,0,0.3);
  padding:4px 10px;
  border-radius:15px;
  border:1px solid rgba(255,209,102,0.3);
  text-align:center;
  width:100%;
}

.upgrade-name{
  font-size:10px;
  opacity:0.8;
  text-align:center;
  line-height:1.2;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω */
.shop-tabs{
  display:flex;
  gap:8px;
  margin-bottom:20px;
  justify-content:center;
  flex-wrap:wrap;
}

.shop-tab{
  background:rgba(40,30,80,0.8);
  border:none;
  color:#d1a5ff;
  padding:10px 20px;
  border-radius:12px;
  cursor:pointer;
  font-size:13px;
  font-weight:600;
  transition:all 0.3s;
  border:2px solid rgba(157,78,221,0.3);
  min-width:140px;
  text-align:center;
  touch-action:manipulation;
}

@media (max-width: 768px) {
  .shop-tab{
    padding:8px 15px;
    font-size:12px;
    min-width:120px;
  }
}

.shop-tab.active{
  background:linear-gradient(145deg, #9d4edd, #8e2de2);
  color:#fff;
  border-color:rgba(157,78,221,0.7);
}

.shop-container{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));
  gap:12px;
  padding:15px;
}

@media (max-width: 480px) {
  .shop-container{
    grid-template-columns:repeat(auto-fill, minmax(140px, 1fr));
    gap:10px;
    padding:10px;
  }
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–∫–∏–Ω–æ–≤ */
.skin-card{
  background:linear-gradient(145deg, rgba(25,20,50,0.9), rgba(15,10,30,0.9));
  border-radius:15px;
  overflow:hidden;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border:2px solid rgba(157,78,221,0.3);
  box-shadow:0 5px 20px rgba(0,0,0,0.5);
  position:relative;
  cursor:pointer;
  min-height:180px;
  touch-action:manipulation;
}

@media (max-width: 768px) {
  .skin-card{
    min-height:160px;
  }
}

.skin-image{
  width:100%;
  height:100px;
  object-fit:cover;
  border-bottom:2px solid rgba(157,78,221,0.3);
}

@media (max-width: 768px) {
  .skin-image{
    height:90px;
  }
}

.skin-info{
  padding:10px;
  text-align:center;
}

.skin-name{
  font-size:12px;
  font-weight:600;
  color:#e0c3ff;
  margin-bottom:8px;
  min-height:32px;
  display:flex;
  align-items:center;
  justify-content:center;
  line-height:1.2;
  overflow:hidden;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
}

@media (max-width: 768px) {
  .skin-name{
    font-size:11px;
    min-height:28px;
  }
}

.skin-price{
  font-size:13px;
  font-weight:bold;
  color:#ffd166;
  background:rgba(0,0,0,0.4);
  padding:5px 12px;
  border-radius:15px;
  display:inline-block;
  border:1px solid rgba(255,209,102,0.3);
}

.skin-owned-badge{
  position:absolute;
  top:8px;
  right:8px;
  background:#4caf50;
  color:white;
  padding:4px 8px;
  border-radius:12px;
  font-size:11px;
  font-weight:bold;
  z-index:2;
}

/* –ú–µ–Ω—é –∞–¥–∞–ø—Ç–∏–≤ */
.menu-content{
  max-width:600px;
  margin:0 auto;
  padding:20px;
  text-align:center;
}

@media (max-width: 768px) {
  .menu-content{
    padding:15px;
  }
}

.creator-signature{
  font-size:clamp(24px, 5vw, 36px);
  font-weight:900;
  background:linear-gradient(135deg, #00b4ff, #9d4edd, #ff6b6b);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  margin-bottom:30px;
  text-shadow:0 0 20px rgba(0,180,255,0.3);
  line-height:1.2;
}

.code-input-container{
  background:rgba(25,35,70,0.8);
  padding:20px;
  border-radius:20px;
  border:2px solid rgba(88, 179, 255, 0.3);
  margin:30px 0;
  box-shadow:0 10px 30px rgba(0,0,0,0.6);
}

@media (max-width: 768px) {
  .code-input-container{
    padding:15px;
    margin:20px 0;
  }
}

.stellar-code-input{
  width:100%;
  padding:15px;
  margin-bottom:15px;
  background:rgba(10,20,40,0.9);
  border:2px solid #00b4ff;
  border-radius:12px;
  color:white;
  font-size:16px;
  font-family:'Orbitron', sans-serif;
  text-align:center;
  letter-spacing:1px;
  transition:all 0.3s;
  min-height:50px;
}

@media (max-width: 768px) {
  .stellar-code-input{
    padding:12px;
    font-size:14px;
    min-height:45px;
  }
}

.stellar-activate-btn{
  width:100%;
  padding:16px;
  background:linear-gradient(145deg, #00b4ff, #4a00e0);
  color:white;
  border:none;
  border-radius:12px;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
  transition:all 0.4s;
  font-family:'Orbitron', sans-serif;
  letter-spacing:1px;
  text-transform:uppercase;
  min-height:55px;
  touch-action:manipulation;
}

@media (max-width: 768px) {
  .stellar-activate-btn{
    padding:14px;
    font-size:15px;
    min-height:50px;
  }
}

.discord-link{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  background:linear-gradient(145deg, #5865F2, #4752c4);
  color:white;
  padding:16px 30px;
  border-radius:18px;
  text-decoration:none;
  font-weight:800;
  font-size:16px;
  margin-top:25px;
  transition:all 0.4s;
  width:100%;
  max-width:400px;
  touch-action:manipulation;
}

@media (max-width: 768px) {
  .discord-link{
    padding:14px 20px;
    font-size:15px;
    margin-top:20px;
  }
}

/* –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
.quantum-flare{
  position:absolute;
  font-weight:800;
  font-size:20px;
  animation:quantum-float 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  pointer-events:none;
  text-shadow:0 0 20px currentColor;
  font-family:'Orbitron', sans-serif;
  z-index:100;
}

@keyframes quantum-float{
  0%{opacity:1;transform:translateY(0) scale(1) rotate(0deg);}
  100%{opacity:0;transform:translateY(-60px) scale(0.8) rotate(0deg);}
}

/* –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
@media (max-width: 360px) {
  .stats-container{
    grid-template-columns:1fr;
  }
  
  .game-info{
    grid-template-columns:1fr;
  }
  
  .panel-tabs{
    flex-direction:column;
  }
  
  .tab{
    width:100%;
  }
  
  .shop-tabs{
    flex-direction:column;
  }
  
  .shop-tab{
    width:100%;
  }
}

/* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ iOS */
@media (max-device-width: 1024px) {
  body{
    -webkit-text-size-adjust:100%;
  }
  
  input, textarea, select{
    font-size:16px !important;
  }
}

/* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
@media (min-height: 800px) and (max-width: 768px) {
  .nova-core{
    width:min(60vw, 250px);
    height:min(60vw, 250px);
  }
}

/* –£–ª—É—á—à–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –Ω–∞ —Å–æ–ª–Ω—Ü–µ */
@media (prefers-color-scheme: light) {
  .stat-card, .info-item, .upgrade-btn, .skin-card{
    border-color:rgba(0,0,0,0.2);
  }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ */
.loading-spinner{
  display:none;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  z-index:9999;
}

/* –£–ª—É—á—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* –ü–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
@media (orientation: portrait) {
  .main-game-area{
    padding:15px;
  }
  
  .nova-core{
    width:min(65vw, 280px);
    height:min(65vw, 280px);
  }
}

/* –õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
@media (orientation: landscape) and (max-height: 600px) {
  .top-bar{
    padding:8px;
    margin-bottom:10px;
  }
  
  .stats-container{
    grid-template-columns:repeat(4, 1fr);
    gap:8px;
    margin-bottom:10px;
  }
  
  .stat-card{
    min-height:70px;
    padding:10px;
  }
  
  .stat-value{
    font-size:16px;
  }
  
  .nova-core{
    width:min(40vh, 200px);
    height:min(40vh, 200px);
  }
  
  .game-info{
    grid-template-columns:repeat(4, 1fr);
    gap:8px;
  }
  
  .info-item{
    min-height:60px;
    padding:8px 10px;
  }
  
  .info-value{
    font-size:14px;
  }
}
</style>
</head>
<body>

<div class="game-container">
  <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
  <div class="top-bar">
    <button class="astro-btn" onclick="toggleStellarMenu()">‚ò∞ –°–¢–ê–ù–¶–ò–Ø</button>
    <button class="astro-btn" onclick="toggleQuantumUpgrades()">‚ñ≤ –ú–û–î–ï–†–ù–ò–ó–ê–¶–ò–Ø</button>
  </div>

  <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-label">–≠–ù–ï–†–ì–ò–Ø</div>
      <div class="stat-value" id="stellarEnergy">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">–ü–û–ö–û–õ–ï–ù–ò–ï</div>
      <div class="stat-value" id="quantumGeneration">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">–ú–ù–û–ñ–ò–¢–ï–õ–¨</div>
      <div class="stat-value" id="singularityMulti">√ó1</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">–ë–û–ù–£–° –°–ö–ò–ù–û–í</div>
      <div class="stat-value" id="skinBonusDisplay">√ó1.00</div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –±–ª–æ–∫ -->
  <div class="main-game-area">
    <div class="stellar-energy">–≠–ù–ï–†–ì–ò–Ø: <span id="energyDisplay">0</span></div>
    
    <div class="nova-core-area">
      <div class="nova-core" id="novaCore"></div>
    </div>
    
    <div class="game-info">
      <div class="info-item">
        <div class="info-label">–Ø–î–†–û</div>
        <div class="info-value" id="corePower">1</div>
      </div>
      <div class="info-item">
        <div class="info-label">–ê–í–¢–û-–°–ë–û–†</div>
        <div class="info-value" id="autoHarvest">0/—Å–µ–∫</div>
      </div>
      <div class="info-item">
        <div class="info-label">–ú–ù–û–ñ–ò–¢–ï–õ–¨</div>
        <div class="info-value" id="quantumMulti">√ó1</div>
      </div>
      <div class="info-item">
        <div class="info-label">–ò–¢–û–ì</div>
        <div class="info-value" id="totalOutput">√ó1</div>
      </div>
    </div>
    
    <button class="singularity-btn" id="singularityBtn" onclick="quantumSingularity()">
      –°–ò–ù–ì–£–õ–Ø–†–ù–û–°–¢–¨
    </button>
  </div>
</div>

<!-- –ü–∞–Ω–µ–ª—å –º–µ–Ω—é -->
<div class="panel" id="stellarMenu">
  <button class="close-panel" onclick="toggleStellarMenu()">√ó</button>
  <div class="menu-content">
    <div class="creator-signature">REFORMOTI –°–ò–°–¢–ï–ú–´</div>
    
    <div class="code-input-container">
      <input type="text" class="stellar-code-input" id="stellarCode" placeholder="–ö–û–°–ú–ò–ß–ï–°–ö–ò–ô –ö–û–î" inputmode="numeric">
      <button class="stellar-activate-btn" onclick="activateStellarCode()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
      <div class="stellar-message" id="stellarMessage"></div>
    </div>
    
    <a href="https://discord.gg/8d2RQHvGhH" target="_blank" class="discord-link">
      <span>üõ∏</span> DISCORD
    </a>
  </div>
</div>

<!-- –ü–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏ -->
<div class="panel" id="quantumUpgrades">
  <button class="close-panel" onclick="toggleQuantumUpgrades()">√ó</button>
  
  <div class="panel-tabs">
    <button class="tab active" onclick="openTab('clickTab',this)">‚ö° –Ø–î–†–û</button>
    <button class="tab" onclick="openTab('autoTab',this)">üåÄ –ê–í–¢–û</button>
    <button class="tab" onclick="openTab('multiTab',this)">‚ôæÔ∏è –ú–ù–û–ñ</button>
    <button class="tab" onclick="openTab('shopTab',this)">üõí –ú–ê–ì–ê–ó–ò–ù</button>
  </div>

  <div id="clickTab" class="tab-content active">
    <div class="upgrades-grid" id="clickUpgradesGrid"></div>
  </div>
  
  <div id="autoTab" class="tab-content">
    <div class="upgrades-grid" id="autoUpgradesGrid"></div>
  </div>
  
  <div id="multiTab" class="tab-content">
    <div class="upgrades-grid" id="multiplierGrid"></div>
  </div>
  
  <div id="shopTab" class="tab-content">
    <div class="shop-tabs">
      <button class="shop-tab active" onclick="openShopTab('skinsTab',this)">üåå –°–ö–ò–ù–´</button>
      <button class="shop-tab" onclick="openShopTab('backgroundsTab',this)">‚ú® –§–û–ù–´</button>
    </div>
    
    <div id="skinsTab" class="shop-tab-content active">
      <div class="shop-container" id="skinsGrid"></div>
    </div>
    
    <div id="backgroundsTab" class="shop-tab-content">
      <div class="shop-container" id="backgroundsGrid"></div>
    </div>
  </div>
</div>

<script>
// === –ö–û–°–ú–ò–ß–ï–°–ö–ò–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===
let stellarEnergy = 0;
let corePower = 1;
let autoHarvest = 0;
let quantumMulti = 1;
let quantumGeneration = 0;
let singularityMulti = 1;
let skinBonusMulti = 1;
let stellarCodeUsed = false;
let isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

// –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
if (isMobile) {
  document.body.style.fontSize = '14px';
}

// –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ï –ú–ê–°–°–ò–í–´ –ü–†–û–ö–ê–ß–ö–ò
const clickUpgrades = [
  {power:1, price:20, name:"–ë–∞–∑–æ–≤—ã–π –∏–º–ø—É–ª—å—Å"},
  {power:5, price:100, name:"–ü—Ä–æ—Ç–æ–Ω–Ω—ã–π –≤—Å–ø–ª–µ—Å–∫"},
  {power:10, price:200, name:"–ù–µ–π—Ç—Ä–æ–Ω–Ω–∞—è –≤–æ–ª–Ω–∞"},
  {power:25, price:500, name:"–ü–ª–∞–∑–º–µ–Ω–Ω—ã–π –≤—ã–±—Ä–æ—Å"},
  {power:50, price:1000, name:"–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π —É–¥–∞—Ä"},
  {power:100, price:2000, name:"–°–∏–Ω–≥—É–ª—è—Ä–Ω—ã–π –≤–∑—Ä—ã–≤"},
  {power:1200, price:24000, name:"–ß—ë—Ä–Ω–∞—è –¥—ã—Ä–∞"},
  {power:4500, price:90000, name:"–ö–≤–∞–∑–∞—Ä"},
  {power:8494, price:169880, name:"–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Ç–µ—Ä"},
  {power:24000, price:480000, name:"–¢—ë–º–Ω–∞—è –º–∞—Ç–µ—Ä–∏—è"},
  {power:70000, price:1400000, name:"–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–Ω–∞"},
  {power:1000000, price:20000000, name:"–ë–æ–ª—å—à–æ–π –≤–∑—Ä—ã–≤"}
];

const autoUpgrades = [
  {power:1, price:30, name:"–°–æ–ª–Ω–µ—á–Ω—ã–π –ø–∞—Ä—É—Å"},
  {power:5, price:150, name:"–ò–æ–Ω–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å"},
  {power:10, price:300, name:"–í–∞—Ä–ø-–¥–≤–∏–≥–∞—Ç–µ–ª—å"},
  {power:20, price:600, name:"–ö–≤–∞–Ω—Ç–æ–≤—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å"},
  {power:25, price:750, name:"–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–∞—Ä—É—Å"},
  {power:35, price:1050, name:"–¢–µ—Ä–º–æ—è–¥–µ—Ä–Ω—ã–π —Ä–µ–∞–∫—Ç–æ—Ä"},
  {power:50, price:1500, name:"–ó–≤—ë–∑–¥–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å"},
  {power:80, price:2400, name:"–ß–µ—Ä–≤–æ—Ç–æ—á–∏–Ω–∞"},
  {power:230, price:6900, name:"–ì–∏–ø–µ—Ä–¥–≤–∏–≥–∞—Ç–µ–ª—å"},
  {power:900, price:27000, name:"–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–∫–∞—á–æ–∫"},
  {power:2300, price:69000, name:"–í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–µ—Ç–ª—è"},
  {power:9000, price:270000, name:"–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç–∞–ª"},
  {power:14000, price:420000, name:"–ú—É–ª—å—Ç–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ—Å—Ç"},
  {power:40900, price:1227000, name:"–°–∏–Ω–≥—É–ª—è—Ä–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å"},
  {power:100000, price:3000000, name:"–ê–±—Å–æ–ª—é—Ç–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å"}
];

// –ú–ù–û–ñ–ò–¢–ï–õ–ò
const multiplierUpgrades = [
  {value:1.2, price:1000, name:"√ó1.2 –°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å"},
  {value:2, price:5000, name:"√ó2 –°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å"},
  {value:5, price:25000, name:"√ó5 –°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å"},
  {value:20, price:100000, name:"√ó20 –°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å"},
  {value:100, price:500000, name:"√ó100 –°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å"}
];
let purchasedMultipliers = new Set();

// –°–ö–ò–ù–´ –ò –§–û–ù–´
const skins = [
  {name:'–¢—É–º–∞–Ω–Ω–æ—Å—Ç—å –ê–Ω–¥—Ä–æ–º–µ–¥—ã',price:500,url:'https://wallpaper.forfun.com/fetch/8d/8dbdaf8bd40e873ddb331cad3c246db3.jpeg'},
  {name:'–û–±–ª–∞–∫–æ –°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç–∏',price:1200,url:'https://media.istockphoto.com/id/1498666644/ru/%D1%84%D0%BE%D1%82%D0%BE/%D0%BE%D0%B1%D0%BB%D0%B0%D0%BA%D0%B0-%D1%87%D0%B5%D1%80%D0%BD%D0%BE%D0%B9-%D0%B4%D1%8B%D1%80%D1%8B-%D0%B2%D1%8B%D1%81%D0%BE%D0%BA%D0%BE%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9-%D1%80%D0%B5%D0%BD%D0%B4%D0%B5%D1%80%D0%B8%D0%BD%D0%B3.jpg?s=612x612&w=0&k=20&c=eDy_UIZjpbHlTQB5ub-WOapfMPEQMiVrUBSRptuR8eA='},
  {name:'–ö–≤–∞–Ω—Ç–æ–≤—ã–π –†–∞–∑–ª–æ–º',price:2500,url:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS0TgYQy6Kacnqz2eG4Kzpb5s3Ih73QeAYi8Q&s'},
  {name:'–≠—Ö–æ –í—Å–µ–ª–µ–Ω–Ω–æ–π',price:4000,url:'https://images.steamusercontent.com/ugc/1675869057985981771/EC21624F70B718E5406F4748BD3DFC1EE4309CB7/?imw=512&imh=512&ima=fit&impolicy=Letterbox&imcolor=%23000000&letterbox=true'},
  {name:'–ß–µ—Ä–µ–ø –ü—É—Å—Ç–æ—Ç—ã',price:8000,url:'https://img.freepik.com/premium-vector/illustration-white-skull-black-background-skull-tattoos-illustration-scarf_15870-787.jpg'},
  {name:'–ö—Ä–∏–∫ –ë–µ–∑–¥–Ω—ã',price:12000,url:'https://img.freepik.com/premium-vector/screaming-skull-vector-black-background_248052-86.jpg'},
  {name:'–¢–µ—Ç—Ä–∞–¥—å –°–º–µ—Ä—Ç–∏',price:20000,url:'https://img.goodfon.ru/wallpaper/big/c/e3/death-note-tetrad-smerti-2436.webp'},
  {name:'–ê—Å—Ç—Ä–∞–ª—å–Ω—ã–π –°–∏–º–≤–æ–ª',price:35000,url:'https://i.pinimg.com/736x/b9/30/ba/b930ba00009244ce23891e5c42e699e9.jpg'},
  {name:'–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –†–∞–∑—Ä—è–¥',price:80000,url:'https://klike.net/uploads/posts/2022-07/1657778940_37.jpg'},
  {name:'–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω—ã–π –ò–º–ø—É–ª—å—Å',price:100000,url:'https://zefirka.club/uploads/posts/2023-01/thumbs/1673691446_24-zefirka-club-p-molniya-makvin-na-avu-35.jpg'}
];

const backgrounds = [
  {name:'–ì–ª—É–±–æ–∫–∏–π –ö–æ—Å–º–æ—Å',price:800,url:'https://images.wallpaperscraft.ru/image/single/kosmos_zvezdy_tumannost_157030_3840x2400.jpg'},
  {name:'–°–∏–Ω–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å',price:2000,url:'https://server.wallpaperalchemy.com/storage/wallpapers/91/4k-black-hole-minimalistic-wallpaper.png'},
  {name:'–ü–ª–∞–Ω–µ—Ç–∞ –ó–µ–º–ª—è',price:3500,url:'https://img3.akspic.ru/crops/1/9/9/5/25991/25991-zemlya-atmosfera-kosmos-prostranstvo-vselennaya-3840x2160.jpg'},
  {name:'–ì–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –í–∏—Ö—Ä—å',price:5000,url:'https://wallpaper.forfun.com/fetch/60/604f6358cd0a4b83989516f724ed8bea.jpeg'},
  {name:'–¢—É–º–∞–Ω–Ω–æ—Å—Ç—å –û—Ä–∏–æ–Ω–∞',price:7500,url:'https://images.alphacoders.com/135/1354208.jpeg'},
  {name:'–õ–µ–¥—è–Ω–∞—è –ü–ª–∞–Ω–µ—Ç–∞',price:10000,url:'https://abrakadabra.fun/uploads/posts/2021-12/1640668539_5-abrakadabra-fun-p-oboi-na-rabochii-stol-planeta-6.png'},
  {name:'–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –û–∫–µ–∞–Ω',price:15000,url:'https://images.wallpapershq.com/wallpapers/1284/wallpaper_1284_3840x2160.jpg'},
  {name:'–ê–Ω–∏–º–µ –ü–µ–π–∑–∞–∂',price:20000,url:'https://sotni.ru/wp-content/uploads/2023/08/anime-peizazh-375.webp'},
  {name:'–ê–Ω–∏–º–µ –ó–∞–∫–∞—Ç',price:25000,url:'https://abrakadabra.fun/uploads/posts/2022-02/1643978194_2-abrakadabra-fun-p-fon-dlya-prevyu-anime-2.jpg'},
  {name:'–¢—ë–º–Ω—ã–π –õ–µ—Å',price:30000,url:'https://img2.akspic.ru/crops/1/1/7/7/97711/97711-les-chernyj_les-priroda-derevo-solnechnyj_svet-3840x2160.jpg'}
];

const ownedSkins = new Set();
const ownedBackgrounds = new Set();
const novaCore = document.getElementById('novaCore');

// === –ê–î–ê–ü–¢–ò–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ===
function formatNumber(num) {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + 'M';
  }
  if (num >= 1000) {
    return (num / 1000).toFixed(1) + 'K';
  }
  return num.toString();
}

// === –ö–í–ê–ù–¢–û–í–´–ô –í–°–ü–õ–ï–°–ö (–º–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è) ===
function createQuantumFlare(x, y, val) {
  if (isMobile && Math.random() > 0.7) return; // –£–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–∏—Ü –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
  
  const flare = document.createElement('div');
  flare.className = 'quantum-flare';
  flare.style.left = x + 'px';
  flare.style.top = y + 'px';
  
  const displayVal = isMobile ? formatNumber(val) : val.toLocaleString();
  
  if (val > 10000) {
    flare.style.color = '#ff6b6b';
    flare.textContent = '‚òÖ+' + displayVal;
  } else if (val > 1000) {
    flare.style.color = '#9d4edd';
    flare.textContent = '‚ú¶+' + displayVal;
  } else {
    flare.style.color = '#00b4ff';
    flare.textContent = '‚ö°+' + displayVal;
  }
  
  flare.style.fontSize = isMobile ? '16px' : '20px';
  document.querySelector('.nova-core-area').appendChild(flare);
  setTimeout(() => flare.remove(), 1000);
}

// === –Ø–î–†–û –ù–û–í–´ (—Ç–∞—á —Å–æ–±—ã—Ç–∏—è) ===
let touchStartTime = 0;
novaCore.addEventListener('touchstart', function(e) {
  touchStartTime = Date.now();
  e.preventDefault();
}, { passive: false });

novaCore.addEventListener('touchend', function(e) {
  const touch = e.changedTouches[0];
  const rect = novaCore.getBoundingClientRect();
  const x = touch.clientX - rect.left;
  const y = touch.clientY - rect.top;
  
  const val = Math.floor(corePower * quantumMulti * singularityMulti * skinBonusMulti);
  stellarEnergy += val;
  createQuantumFlare(x, y, val);
  updateCosmicInterface();
  
  // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
  if (isMobile && navigator.vibrate) {
    navigator.vibrate(50);
  }
  
  e.preventDefault();
}, { passive: false });

// –ö–ª–∏–∫ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤
novaCore.onclick = (e) => {
  const rect = novaCore.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  
  const val = Math.floor(corePower * quantumMulti * singularityMulti * skinBonusMulti);
  stellarEnergy += val;
  createQuantumFlare(x, y, val);
  updateCosmicInterface();
};

// === –ê–ö–¢–ò–í–ê–¶–ò–Ø –ö–û–î–ê ===
function activateStellarCode() {
  if (stellarCodeUsed) {
    showStellarMessage('–ö–æ–¥ —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!', '#ff9800');
    return;
  }
  
  const codeInput = document.getElementById('stellarCode');
  const code = codeInput.value.trim();
  
  if (code === '1324') {
    corePower += 98453679;
    stellarCodeUsed = true;
    
    showStellarMessage('–ö–û–î –ê–ö–¢–ò–í–ò–†–û–í–ê–ù! +98.4M', '#00e0ff');
    
    // –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
    if (!isMobile) {
      document.body.style.backgroundColor = '#4a00e0';
      setTimeout(() => {
        document.body.style.backgroundColor = '';
      }, 800);
      
      for(let i = 0; i < 15; i++) {
        setTimeout(() => {
          const x = Math.random() * window.innerWidth;
          const y = Math.random() * window.innerHeight;
          createQuantumFlare(x, y, '‚òÖ');
        }, i * 40);
      }
    }
    
    codeInput.value = '';
    codeInput.disabled = true;
    codeInput.placeholder = '–ê–ö–¢–ò–í–ò–†–û–í–ê–ù';
    
    updateCosmicInterface();
  } else {
    showStellarMessage('–ù–ï–í–ï–†–ù–´–ô –ö–û–î!', '#ff6b6b');
  }
}

function showStellarMessage(text, color) {
  const message = document.getElementById('stellarMessage');
  message.textContent = text;
  message.style.color = color;
  message.style.display = 'block';
  setTimeout(() => {
    message.style.display = 'none';
  }, 2000);
}

// === –ê–í–¢–û-–°–ë–û–† ===
setInterval(() => {
  stellarEnergy += autoHarvest * quantumMulti * singularityMulti * skinBonusMulti;
  updateCosmicInterface();
}, 1000);

// === –í–ö–õ–ê–î–ö–ò ===
function openTab(id, btn) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  btn.classList.add('active');
}

function openShopTab(id, btn) {
  document.querySelectorAll('.shop-tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.shop-tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  btn.classList.add('active');
}

function toggleStellarMenu() {
  const menu = document.getElementById('stellarMenu');
  menu.classList.toggle('active');
  document.getElementById('quantumUpgrades').classList.remove('active');
}

function toggleQuantumUpgrades() {
  const upgrades = document.getElementById('quantumUpgrades');
  upgrades.classList.toggle('active');
  document.getElementById('stellarMenu').classList.remove('active');
}

// === –ë–û–ù–£–° –°–ö–ò–ù–û–í ===
function calculateSkinBonus() {
  const skinCount = ownedSkins.size;
  if (skinCount === 0) return 1;
  if (skinCount === 1) return 2;
  return Math.pow(1.5, skinCount - 1);
}

// === –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –ü–†–û–ö–ê–ß–ï–ö ===
function renderClickUpgrades() {
  const container = document.getElementById('clickUpgradesGrid');
  container.innerHTML = '';
  
  clickUpgrades.forEach((upgrade, index) => {
    const btn = document.createElement('button');
    btn.className = 'upgrade-btn';
    
    const price = upgrade.power * 20;
    const displayPrice = isMobile ? formatNumber(price) : price.toLocaleString();
    const displayPower = isMobile ? formatNumber(upgrade.power) : upgrade.power;
    
    btn.innerHTML = `
      <div class="upgrade-value">+${displayPower}</div>
      <div class="upgrade-price">${displayPrice} –≠–ù</div>
      <div class="upgrade-name">${upgrade.name}</div>
    `;
    
    btn.disabled = stellarEnergy < price;
    btn.onclick = () => {
      if (stellarEnergy < price) return;
      stellarEnergy -= price;
      corePower += upgrade.power;
      updateCosmicInterface();
      
      if (!isMobile) {
        novaCore.style.boxShadow = '0 0 80px rgba(0,180,255,0.8)';
        setTimeout(() => {
          novaCore.style.boxShadow = '';
        }, 300);
      }
    };
    
    container.appendChild(btn);
  });
}

function renderAutoUpgrades() {
  const container = document.getElementById('autoUpgradesGrid');
  container.innerHTML = '';
  
  autoUpgrades.forEach((upgrade, index) => {
    const btn = document.createElement('button');
    btn.className = 'upgrade-btn';
    
    const price = upgrade.power * 30;
    const displayPrice = isMobile ? formatNumber(price) : price.toLocaleString();
    const displayPower = isMobile ? formatNumber(upgrade.power) : upgrade.power;
    
    btn.innerHTML = `
      <div class="upgrade-value">+${displayPower}/—Å–µ–∫</div>
      <div class="upgrade-price">${displayPrice} –≠–ù</div>
      <div class="upgrade-name">${upgrade.name}</div>
    `;
    
    btn.disabled = stellarEnergy < price;
    btn.onclick = () => {
      if (stellarEnergy < price) return;
      stellarEnergy -= price;
      autoHarvest += upgrade.power;
      updateCosmicInterface();
      
      if (!isMobile) {
        for(let i = 0; i < 2; i++) {
          setTimeout(() => {
            const x = Math.random() * 200 + 50;
            const y = Math.random() * 200 + 50;
            createQuantumFlare(x, y, 'üåÄ');
          }, i * 200);
        }
      }
    };
    
    container.appendChild(btn);
  });
}

function renderMultipliers() {
  const container = document.getElementById('multiplierGrid');
  container.innerHTML = '';
  
  multiplierUpgrades.forEach((multiplier, index) => {
    const btn = document.createElement('button');
    btn.className = 'upgrade-btn';
    
    const purchased = purchasedMultipliers.has(index);
    const displayPrice = isMobile ? formatNumber(multiplier.price) : multiplier.price.toLocaleString();
    
    btn.innerHTML = `
      <div class="upgrade-value">${multiplier.name.split(' ')[0]}</div>
      <div class="upgrade-price">${displayPrice} –≠–ù</div>
      <div class="upgrade-name">${multiplier.name}</div>
    `;
    
    if (purchased) {
      btn.classList.add('purchased');
      btn.disabled = true;
    } else {
      btn.disabled = stellarEnergy < multiplier.price;
      btn.onclick = () => {
        if (stellarEnergy < multiplier.price) return;
        stellarEnergy -= multiplier.price;
        quantumMulti *= multiplier.value;
        purchasedMultipliers.add(index);
        updateCosmicInterface();
        
        if (!isMobile) {
          document.body.style.backgroundColor = '#9d4edd';
          setTimeout(() => {
            document.body.style.backgroundColor = '';
          }, 400);
        }
      };
    }
    
    container.appendChild(btn);
  });
}

// === –ö–ê–†–¢–û–ß–ö–ò –°–ö–ò–ù–û–í ===
function renderSkins() {
  const container = document.getElementById('skinsGrid');
  container.innerHTML = '';
  
  skins.forEach(skin => {
    const card = document.createElement('div');
    card.className = 'skin-card';
    
    const owned = ownedSkins.has(skin.name);
    const displayPrice = isMobile ? formatNumber(skin.price) : skin.price;
    
    if (owned) {
      card.classList.add('owned');
      card.innerHTML = `
        <div class="skin-owned-badge">‚úì</div>
        <img src="${skin.url}" alt="${skin.name}" class="skin-image" loading="lazy">
        <div class="skin-info">
          <div class="skin-name">${skin.name}</div>
          <div class="skin-price">–ö–£–ü–õ–ï–ù–û</div>
        </div>
      `;
    } else if (stellarEnergy >= skin.price) {
      card.classList.add('available');
      card.innerHTML = `
        <img src="${skin.url}" alt="${skin.name}" class="skin-image" loading="lazy">
        <div class="skin-info">
          <div class="skin-name">${skin.name}</div>
          <div class="skin-price">${displayPrice} –≠–ù</div>
        </div>
      `;
    } else {
      card.style.opacity = '0.6';
      card.innerHTML = `
        <img src="${skin.url}" alt="${skin.name}" class="skin-image" loading="lazy">
        <div class="skin-info">
          <div class="skin-name">${skin.name}</div>
          <div class="skin-price">${displayPrice} –≠–ù</div>
        </div>
      `;
    }
    
    card.onclick = () => {
      if (stellarEnergy < skin.price && !owned) return;
      
      ownedSkins.add(skin.name);
      novaCore.style.backgroundImage = `url(${skin.url})`;
      skinBonusMulti = calculateSkinBonus();
      
      if (!owned) {
        stellarEnergy -= skin.price;
        if (!isMobile) {
          novaCore.style.boxShadow = '0 0 80px rgba(157,78,221,0.9)';
          setTimeout(() => {
            novaCore.style.boxShadow = '';
          }, 1000);
        }
      }
      
      updateCosmicInterface();
    };
    
    container.appendChild(card);
  });
}

function renderBackgrounds() {
  const container = document.getElementById('backgroundsGrid');
  container.innerHTML = '';
  
  backgrounds.forEach(bg => {
    const card = document.createElement('div');
    card.className = 'skin-card';
    
    const owned = ownedBackgrounds.has(bg.name);
    const displayPrice = isMobile ? formatNumber(bg.price) : bg.price;
    
    if (owned) {
      card.classList.add('owned');
      card.innerHTML = `
        <div class="skin-owned-badge">‚úì</div>
        <img src="${bg.url}" alt="${bg.name}" class="skin-image" loading="lazy">
        <div class="skin-info">
          <div class="skin-name">${bg.name}</div>
          <div class="skin-price">–ö–£–ü–õ–ï–ù–û</div>
        </div>
      `;
    } else if (stellarEnergy >= bg.price) {
      card.classList.add('available');
      card.innerHTML = `
        <img src="${bg.url}" alt="${bg.name}" class="skin-image" loading="lazy">
        <div class="skin-info">
          <div class="skin-name">${bg.name}</div>
          <div class="skin-price">${displayPrice} –≠–ù</div>
        </div>
      `;
    } else {
      card.style.opacity = '0.6';
      card.innerHTML = `
        <img src="${bg.url}" alt="${bg.name}" class="skin-image" loading="lazy">
        <div class="skin-info">
          <div class="skin-name">${bg.name}</div>
          <div class="skin-price">${displayPrice} –≠–ù</div>
        </div>
      `;
    }
    
    card.onclick = () => {
      if (stellarEnergy < bg.price && !owned) return;
      
      ownedBackgrounds.add(bg.name);
      document.body.style.backgroundImage = `url(${bg.url})`;
      
      if (!owned) {
        stellarEnergy -= bg.price;
      }
      
      updateCosmicInterface();
    };
    
    container.appendChild(card);
  });
}

// === –°–ò–ù–ì–£–õ–Ø–†–ù–û–°–¢–¨ ===
function quantumSingularity() {
  const singularityCost = 1000000;
  if (stellarEnergy < singularityCost) return;
  
  quantumGeneration++;
  singularityMulti *= 2;
  
  stellarEnergy = 0;
  corePower = 1;
  autoHarvest = 0;
  quantumMulti = 1;
  purchasedMultipliers.clear();
  
  if (stellarCodeUsed) {
    corePower += 98453679;
  }
  
  skinBonusMulti = calculateSkinBonus();
  updateCosmicInterface();
  
  if (!isMobile) {
    const colors = ['#9d4edd', '#ff6b6b', '#00b4ff', '#f9c74f'];
    let colorIndex = 0;
    
    const colorShift = setInterval(() => {
      document.body.style.backgroundColor = colors[colorIndex];
      colorIndex = (colorIndex + 1) % colors.length;
    }, 100);
    
    setTimeout(() => {
      clearInterval(colorShift);
      document.body.style.backgroundColor = '';
    }, 1000);
    
    for(let i = 0; i < 20; i++) {
      setTimeout(() => {
        const x = Math.random() * window.innerWidth;
        const y = Math.random() * window.innerHeight;
        const flare = document.createElement('div');
        flare.className = 'quantum-flare';
        flare.style.left = x + 'px';
        flare.style.top = y + 'px';
        flare.style.color = colors[Math.floor(Math.random() * colors.length)];
        flare.textContent = '‚ö°';
        document.body.appendChild(flare);
        setTimeout(() => flare.remove(), 1000);
      }, i * 50);
    }
  }
}

// === –û–ë–ù–û–í–õ–ï–ù–ò–ï ===
function updateCosmicInterface() {
  skinBonusMulti = calculateSkinBonus();
  
  const displayEnergy = isMobile ? formatNumber(stellarEnergy) : stellarEnergy.toLocaleString();
  const displayCore = isMobile ? formatNumber(corePower) : corePower.toLocaleString();
  const displayAuto = isMobile ? formatNumber(autoHarvest) : autoHarvest.toLocaleString();
  
  document.getElementById('stellarEnergy').textContent = displayEnergy;
  document.getElementById('energyDisplay').textContent = displayEnergy;
  document.getElementById('corePower').textContent = displayCore;
  document.getElementById('autoHarvest').textContent = displayAuto + '/—Å–µ–∫';
  document.getElementById('quantumMulti').textContent = '√ó' + quantumMulti;
  document.getElementById('totalOutput').textContent = '√ó' + (quantumMulti * singularityMulti * skinBonusMulti).toFixed(1);
  
  document.getElementById('quantumGeneration').textContent = quantumGeneration;
  document.getElementById('singularityMulti').textContent = '√ó' + singularityMulti;
  document.getElementById('skinBonusDisplay').textContent = '√ó' + skinBonusMulti.toFixed(1);
  
  const singularityBtn = document.getElementById('singularityBtn');
  const singularityCost = 1000000;
  singularityBtn.disabled = stellarEnergy < singularityCost;
  singularityBtn.textContent = stellarEnergy >= singularityCost ? 
    '–°–ò–ù–ì–£–õ–Ø–†–ù–û–°–¢–¨ (' + (isMobile ? '1M' : '1.000.000') + ' –≠–ù)' : 
    '–ù–£–ñ–ù–û ' + (isMobile ? '1M' : '1.000.000') + ' –≠–ù';
  
  renderClickUpgrades();
  renderAutoUpgrades();
  renderMultipliers();
  renderSkins();
  renderBackgrounds();
}

// === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
updateCosmicInterface();

// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ iOS
document.addEventListener('touchmove', function(e) {
  if(e.scale !== 1) {
    e.preventDefault();
  }
}, { passive: false });

// –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
if (isMobile) {
  // –£–º–µ–Ω—å—à–∞–µ–º —á–∞—Å—Ç–æ—Ç—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
  setInterval(updateCosmicInterface, 2000);
  
  // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–µ–Ω—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –¥–æ–ª–≥–æ–º –Ω–∞–∂–∞—Ç–∏–∏
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
  });
  
  // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  window.addEventListener('load', function() {
    const images = document.querySelectorAll('img');
    images.forEach(img => {
      if (img.complete) {
        img.style.opacity = '1';
      } else {
        img.addEventListener('load', function() {
          this.style.opacity = '1';
        });
      }
    });
  });
}
</script>
</body>
</html>